igual deberiamos empezar
 desde el punto 0
 modelo
 que cumpla la demanda
 con el minimo de nurses
 sin tener en cuenta
 descanso
 ni maxConsec
[6:01:06 PM] Pau:
ok
 buena idea

[6:01:16 PM] Adrian:
y luego le metemos las otras
 cuando funcione esa
 porque verlo con todas las restriccones es chungo
[6:02:51 PM] Pau:
z = [0
         1];
w = [[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]
             [0 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]];
 funciona

[6:02:58 PM] Adrian:
bien
[6:03:03 PM] Pau:
ahora una por una a ver...

[6:03:09 PM] Adrian:
si
[6:03:31 PM] Pau:
minHours funciona
 z = [1
         0];
w = [[0 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]
             [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]];

[6:03:43 PM] Adrian:
ahora maxHours
 y ponle un maxHours que siga siendo esa la solucion
 y luego un maxHours menor, que neecsite las 2 nurses
[6:04:21 PM] Pau:
z = [0
         1];
w = [[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]
             [0 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]];
 maxHours=5,  misma sol
 ahora con menos

[6:04:36 PM] Adrian:
maxHours = 3
[6:06:29 PM] Pau:
w = [
[ 0 0 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]
[ 0 1 0 0 0 1 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0]];
demand = 
[ 0 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0];
 funciona

[6:06:37 PM] Adrian:
bien!
 ahora
 maxConsec
[6:06:40 PM] Pau:
no

[6:06:52 PM] Adrian:
si
 como q no
[6:06:53 PM] Pau:
o si?, minHours i maxHours se respeta
 vale nada

[6:06:59 PM] Adrian:
jeje
 next
[6:07:01 PM] Pau:
es que hay un uno en medioa

[6:07:01 PM] Adrian:
maxConsec
 ah
 esperate
 cuanto es minHours
 y cuanto es maxHours?
[6:08:24 PM] Pau:
3 min y 3 maxHours
 esta bien en este paso

[6:08:33 PM] Adrian:
si
 1 min 3 max
 pon eso
 1 min hours y 3 max hours
 para asegurarnos que trabajan las horas justas y necesarias
 no horas extras
 o casi
[6:09:22 PM] Pau:
z = [1
         1];
w = [[0 1 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]
             [0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]];

[6:09:30 PM] Adrian:
si
 perfe
 ahora maxConsec
[6:10:06 PM] Pau:
nNurses = 2;
//hours =  24;
demand = [ 0 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0];
minHours = 1;
maxHours = 3;
maxConsec = 3;
maxPresence = 4;

[6:10:15 PM] Adrian:
vale
 maxConsec eh
 maxPresence no
[6:10:25 PM] Pau:
si si

[6:10:27 PM] Adrian:
ok
[6:10:34 PM] Pau:
pero solo desactivo las constraints en el modelo

[6:10:38 PM] Adrian:
ok
[6:10:43 PM] Pau:
z = [1
         1];
w = [[0 1 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]
             [0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]];

[6:10:49 PM] Adrian:
bien
 cambia los datos de entrada
 para q solo use
 1 nurse
 en este caso
 maxHours = 4
 para que luego con el maxConsec, fuerze a usar 2
[6:11:29 PM] Pau:
nNurses = 2;
//hours =  24;
demand = [ 0 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0];
minHours = 1;
maxHours = 4;
maxConsec = 4;
 w = [[0 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]
             [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]];

[6:11:51 PM] Adrian:
maxConsec = 4;
 maxConsec = 3;
 ponle 3
[6:11:56 PM] Pau:
nNurses = 2;
//hours =  24;
demand = [ 0 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0];
minHours = 1;
maxHours = 4;
maxConsec = 3;

[6:11:58 PM] Adrian:
ok
 1011,0100?
[6:12:27 PM] Pau:
w = [[0 0 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1]
             [0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1]];

[6:12:31 PM] Adrian:
bien
 no
 mal
 mnHours ?
[6:12:47 PM] Pau:
es 1

[6:12:48 PM] Adrian:
sgue siendo 1?
 pues al
 mal*
 esos 1 del final
 wtf
 why
[6:13:06 PM] Pau:
ups
 no los habia visto
 pues ya la tenemos!

[6:13:18 PM] Adrian:
si
[6:13:20 PM] Pau:
que ostias sera?

[6:13:27 PM] Adrian:
interesante pregunta
 xDDDD
 forall (n in N, h1 in 1..(hours-maxConsec))
    sum(h in h1..(h1+maxConsec)) w[n,h] <= maxConsec;
 no?
[6:13:46 PM] Pau:
si
 tema de limites seguro

[6:14:16 PM] Adrian:
si
 eso stoy contando
 con los deditos
 como un nene
 pera
[6:14:26 PM] Pau:
entre 1..h-maxConsec i el h1+maxConsec falla algo

[6:14:50 PM] Adrian:
1..(hours-maxConsec)
 deberia empezar en 0
 eso pa empezar
 no?
[6:15:09 PM] Pau:
creo que empiezza en el 1
 range N=1..nNurses;
range H=1..24;

[6:15:19 PM] Adrian:
los indices empiezan en 1?
 ok si
 vale
 em
 lo veo bien
 -.-
 forall (n in N, h1 in 1..(hours-maxConsec))
    sum(h in h1..(h1+maxConsec)) w[n,h] < maxConsec;
 esto
 funciona?
 < maxConsec en vez de <= maxConsec
[6:18:22 PM] Pau:
vale
 ya es que es
 es eso

[6:18:31 PM] Adrian:
really
 si
 es el <
[6:18:34 PM] Pau:
pero no se puede poner <

[6:18:36 PM] Adrian:
verad?
 :laughing:
[6:18:39 PM] Pau:
hay que poner <= y sumar

[6:18:40 PM] Adrian:
maxConsec-1
 osea
 < maxConsec
 es <= maxConsec-1
[6:19:03 PM] Pau:
si

[6:19:09 PM] Adrian:
calado
 peaso de kuavron
 prueba a ver
[6:19:27 PM] Pau:
pero es qeu recuerdo el dia que lo pensé
 y lo pensé asi

[6:19:36 PM] Adrian:
pero asaf
 te metio caca
 en la mente
[6:19:47 PM] Pau:
una ventana de maxConsec +1 tiene que tener maxConsec maximo
 creo que al pasar a latex... me deje algo

[6:20:16 PM] Adrian:
bueno
 pero ya sale bien
 al cambiarlo?
[6:20:44 PM] Pau:
esper que no deberia ser <= maxConsec - 1
 deberia ser maxConsec

[6:21:10 PM] Adrian:
pero maxConsec+1
[6:21:13 PM] Pau:
pero ademas
 falla
 z = [1
         1];
w = [[0 0 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1]
             [0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1]];
 jajaja

[6:21:24 PM] Adrian:
forall (n in N, h1 in 1..(hours-maxConsec))
    sum(h in h1..(h1+maxConsec+1)) w[n,h] <= maxConsec;
 y eso ?
[6:21:28 PM] Pau:
vale pero se puede hacer mas facil y no falla
 que es h1+maxConsec-1

[6:21:43 PM] Adrian:
aja
[6:21:58 PM] Pau:
ahroa la ventana es de maxConsec justo

[6:22:02 PM] Adrian:
pero
 no me cuadra en mi mente
[6:22:09 PM] Pau:
y por lo tanto tiene que tener maxConsec como maximo

[6:22:12 PM] Adrian:
funciona bien con eso?
 ah no, si me cuadra si
[6:22:23 PM] Pau:
si porque h1 + maxConsec: que longitud es?

[6:22:24 PM] Adrian:
ok
[6:22:25 PM] Pau:
eso

[6:22:26 PM] Adrian:
sisi
 da bien ahora?
[6:22:50 PM] Pau:
z = [1
         0];
w = [[0 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]
             [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]];
 si
 buff!..

[6:22:54 PM] Adrian:
listo
 en fin
 su puta madre
 mete las demas a ver
[6:23:18 PM] Pau:
bueno pero voy a mirar las demas y guardarme todos los tests que hemocs hecho ...

[6:23:26 PM] Adrian:
si
[6:23:54 PM] Pau:
mmmm sigue fallando jaja

[6:24:00 PM] Adrian:
shit
[6:24:00 PM] Pau:
w = [[0 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]
             [0 1 1 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]];

[6:24:09 PM] Adrian:
datos de entrada?
[6:24:21 PM] Pau:
nNurses = 2;
//hours =  24;
demand = [ 0 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0];
minHours = 1;
maxHours = 4;
maxConsec = 3;
 maxPresence = 4;

[6:24:41 PM] Adrian:
esta bien
 no? :laughing:
 si
[6:25:13 PM] Pau:
pero minHours es 1

[6:25:18 PM] Adrian:
cierto
[6:25:24 PM] Pau:
la segunda nurse deberia trabajar 1 hora
 ah bueno pero la func obj. no mimiza eso quiza...

[6:25:37 PM] Adrian:
ya
 sumale
 horas trabajadas
 minimize sum(h in H, n in N) (z[n] + w[n,h]);
 maybe?
[6:27:39 PM] Pau:
espera
 voy a probar al x_16_1
 a ver si ... funciona "mejor"

[6:27:56 PM] Adrian:
minimize sum(n in N) z[n] + sum(h in H, n in N) w[n,h];
 ok
Unread messages
 si xq de todas formas lo de que trabajen las horas justas y necesarias no hay que tenerlo en cuenta...
 mientras no meta una nurse mas por la cara
 pues bien